# dns

* 参考：https://www.ruanyifeng.com/blog/2022/08/dns-query.html

## debug

推荐使用 nslookup 工具进行debug



## dns 树状结构

> **（1）根域名**
>
> 所有域名的起点都是根域名，它写作一个点`.`，放在域名的结尾。因为这部分对于所有域名都是相同的，所以就省略不写了，比如`example.com`等同于`example.com.`（结尾多一个点）。
>
> 你可以试试，任何一个域名结尾加一个点，浏览器都可以正常解读。
>
> **（2）顶级域名**
>
> 根域名的下一级是顶级域名。它分成两种：通用顶级域名（gTLD，比如 .com 和 .net）和国别顶级域名（ccTLD，比如 .cn 和 .us）。
>
> 顶级域名由国际域名管理机构 ICANN 控制，它委托商业公司管理 gTLD，委托各国管理自己的国别域名。
>
> **（3）一级域名**
>
> 一级域名就是你在某个顶级域名下面，自己注册的域名。比如，`ruanyifeng.com`就是我在顶级域名`.com`下面注册的。
>
> **（4）二级域名**
>
> 二级域名是一级域名的子域名，是域名拥有者自行设置的，不用得到许可。比如，`es6` 就是 `ruanyifeng.com` 的二级域名。

## dns 查找规则

> 这种树状结构的意义在于，**只有上级域名，才知道下一级域名的 IP 地址，需要逐级查询。**
>
> 每一级域名都有自己的 DNS 服务器，存放下级域名的 IP 地址。
>
> 所以，如果想要查询二级域名 `es6.ruanyifeng.com` 的 IP 地址，需要三个步骤。
>
> > 第一步，查询根域名服务器，获得顶级域名服务器`.com`（又称 TLD 服务器）的 IP 地址。
> >
> > 第二步，查询 TLD 服务器 `.com`，获得一级域名服务器 `ruanyifeng.com` 的 IP 地址。
> >
> > 第三步，查询一级域名服务器 `ruanyifeng.com`，获得二级域名 `es6` 的 IP 地址。
>
> 下面依次演示这三个步骤。



## 浏览器dns 查找

* 会先从本地浏览器缓存查找，一般60s的缓存
* 然后请求dns服务器——递归服务器，直到找到ip地址



## 一级域名就是顶级域名？

https://baike.baidu.com/item/%E9%A1%B6%E7%BA%A7%E5%9F%9F%E5%90%8D/2152551