# web安全

## 总览

https://developer.mozilla.org/zh-CN/docs/Web/Security

常见参考：https://juejin.cn/post/6844903685693112328?from=search-suggest#heading-18



## CSRF

> 跨站请求伪造（CSRF，Cross-site request forgery）是一种冒充受信任用户，向服务器发送非预期请求的攻击方式。例如，这些非预期请求可能是通过在跳转链接后的 [URL](https://developer.mozilla.org/zh-CN/docs/Glossary/URL) 中加入恶意参数来完成：

* 跨站请求伪造是一种冒充受信任用户，向服务器发送非预期请求的攻击方式，攻击服务器（目标）
* 主要是插入非法标签的形式

主要是利用用户的登录态，也就是在别的网站（伪造的），向真正的服务端发起请求。

### 预防

* 有很多预防 CSRF 的方法，比如实现 [RESTful API](https://developer.mozilla.org/zh-CN/docs/Glossary/REST)，增加 secure token 等等。
* 验证 refere，不过可以伪造
* 增加验证码
* cookie 设置 sameSite 可以有效的针对 CSRF 的保护，设置为 strict

### 场景

1. 发送请求自动携带 cookie

* 主要原因就是session id保存在cookie中，发送请求自动携带。那么就有可能出现别的网站发送了一条认证过的请求。

2. 还有一种场景也可能出现：DNS 劫持，模仿源网站实现认真信息的携带。

## XSS

https://juejin.cn/post/6912030758404259854

跨站脚本攻击（Cross-site scripting，XSS）是一种安全漏洞，攻击者可以利用这种漏洞在网站上注入恶意的客户端代码。若受害者运行这些恶意代码，攻击者就可以突破网站的访问限制并冒充受害者。根据开放式 Web 应用安全项目（OWASP）

* 主要是脚本攻击。（客户端攻击）
* 比如打开了一个新的链接，然后返回一段可执行的客户端代码，获取一些敏感信息。

### 场景

在以下 2 种情况下，容易发生 XSS 攻击：

1. 数据从一个不可靠的链接进入到一个 Web 应用程序。劫持网页
2. 没有过滤掉恶意代码的动态内容被发送给 Web 用户。

> 恶意内容一般包括 [JavaScript](https://developer.mozilla.org/zh-CN/docs/Glossary/JavaScript)，但是，有时候也会包括 HTML，FLASH 或是其他浏览器可执行的代码。XSS 攻击的形式千差万别，但他们通常都会：将 cookies 或其他隐私信息发送给攻击者，将受害者重定向到由攻击者控制的网页，或是经由恶意网站在受害者的机器上进行其他恶意操作。

* 执行一个js，将隐私信息发送给攻击者的网站；或者重定向到攻击者网站；执行其他恶意操作；

XSS 攻击可以分为 3 类：存储型（持久型）、反射型（非持久型）、DOM 型。存储型的最常见。

### 防护

* CSP
* 用户输入内容进行过滤、转义



## DDOS 攻击

DDOS(分布式拒绝服务)是以通过某种手段，致使网站的某个环节崩溃或者瘫痪，从而使网站无法正常运行为目的的一些攻击手段的总称。比较常见的就是通过一些“肉鸡”无间断的大量发送请求，使目标服务器超出负荷，从而崩溃瘫痪。

### 预防

* 对恶意请求的拦截、限频

* 扩容

* ##### CDN

* ##### 网站备份

### DoS 攻击之 Syn 洪泛攻击

参考：https://zhuanlan.zhihu.com/p/457884093

简而言之就是 在建立 TCP 连接的时候不会做状态校验（比如说认证），利用这个漏洞就可以一直发送TCP建立连接请求，不做三次握手的第三次响应，导致服务器有队列中有大量的请求需要响应，从而导致服务器崩溃。

## SQL注入

也就是过滤掉SQL语句，进行转义



## DNS劫持

参考：https://juejin.cn/post/6844904090804174861?searchId=20240612113749821A0175FF673136C5CA

DNS劫持就是通过劫持了DNS服务器，通过某些手段取得某域名的解析记录控制权，进而修改此域名的解析结果，导致对该域名的访问由原IP地址转入到修改后的指定IP，其结果就是对特定的网址不能访问或访问的是假网址，从而实现窃取资料或者破坏原有正常服务的目的。

### 预防

主要针对本机和路由器进行防御（其他服务器也不好防），DNS可以有本机DNS劫持、路由DNS劫持、攻击DNS服务器。

* 开启防火墙，防止修改本地host
* 开启路由器复杂密码，防止修改路由器被攻击
* 定期更换域名服务商
* 网站多域名备份
* https 可以有效认证吧
* local DNS  -> http DNS