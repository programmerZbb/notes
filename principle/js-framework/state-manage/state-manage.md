# 前言

本文档主要是对前端框架思考和状态管理未来的思考。

# 开始

## 1. 遇到啥问题了

react 最大的问题：精确渲染问题

### react 

* 通过 re-render 的方式进行重新渲染，需要重新执行函数。

## 2. useSignal() 是未来吗？

阅读：

* https://www.builder.io/blog/usesignal-is-the-future-of-web-frameworks
* https://juejin.cn/post/7144373510016598023#heading-13
* https://juejin.cn/post/7202058334362370103?searchId=2023101016085196A3256114E275DDE311

### 精确渲染

响应式系统 才是精确渲染的关键！

## 为啥都要围绕react展开呢？

Preact、SolidJs等，说白了还是放不下jsx的灵活性。

## Reactivity

响应式

# 编译型框架

参考：https://juejin.cn/post/7185433911437033531?searchId=20231011163631D51387BA17992F9646CC

## 尤雨溪的《2022前端生态趋势》

参考：https://juejin.cn/post/7123126028838862862?searchId=202310121746358D1266E1ECFDEC3D2E55

## 是否需要虚拟DOM呢？

https://juejin.cn/post/7140643826162466853?searchId=202310121746358D1266E1ECFDEC3D2E55#heading-4

这个选择是与上边采用何种粒度的更新设计紧密相关的：

- 是

  ：对应用级的这种更新粒度，虚拟Dom简直是必需品，因为在

  ```
  diff
  ```

  前它并不能得到此次更新的具体节点信息，必须要通过随后的

  ```
  虚拟Dom+Diff算法
  ```

  筛选出最小差异，不然整树

  ```
  append
  ```

  对性能是灾难（代表框架：

  ```
  React
  ```

  、

  ```
  vue
  ```

  ）。

  - 但这里值得注意的事是：本质上`vue`并不需要`虚拟DOM`，因为它这种基于依赖收集的响应式机制可以直接进行节点级更新，但`vue`借助`虚拟DOM`的抽象能力，可以做到更新粒度的随意调整（目前是组件级），给vue的发展提供更多可能性, 尤其在跨平台渲染方面，这点十分关键。

- **否**：对节点级更新粒度的框架来说，一般没有必要采用虚拟dom（代表作：`vue1.x`、`Svelte`、`SolidJS`）。

## svelte

https://juejin.cn/post/7235628080219078693

### 原理解读

https://juejin.cn/post/6965741667928244254?from=search-suggest#heading-11

特点

更接近于原生的js操作，相当于一个新的`语言`，不存在运行时，就是执行纯js。

#### 位运算

首先我们要知道，JS 中所有的数字都是符合 `IEEE-754` 标准的 `64` 位双精度浮点类型。而所有的位运算都只会保留 `32` 结果的整数。

### 编译型框架的优势

在一些h5游戏或者一些小型项目中，svelte 因为没有运行时，使得它有更小的体积优势。

### 个人理解

在微前端的领域，svelte 可能有更大的作为，但是在一些普通的管理后台或者其他大型项目中，svelte 并不会有很好的优势



## solid.js

### 特点

* 没有虚拟DOM，不需要进行diff计算节省成本
* 借鉴了 React hooks` + `vue3 特点，写法与react相似，有响应式状态系统。
* 不需要像 useEffect 那样添加依赖，自动进行状态跟踪，实现精确渲染
* `hook`调用顺序没要求，以函数调用的方式解决`Proxy`目标必须是对象的问题